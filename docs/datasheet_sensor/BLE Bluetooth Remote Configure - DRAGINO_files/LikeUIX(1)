require(["jquery","xwiki-meta"],function(a,c){var f=XWiki.Model.resolve("XWiki.Like.LikeUIX",XWiki.EntityType.DOCUMENT),e=(new XWiki.Document(f)).getURL("get"),g=function(){var b=a(".like-button").first();a.post(e,{xaction:"like",form_token:c.form_token,document:XWiki.Model.serialize(c.documentReference)}).then(d=>{b.removeClass("btn-primary");b.addClass("btn-default");b.find(".like-number").text(d.counter);a("#is-liked").val("true");new XWiki.widgets.Notification("The page has been liked.","done")}).catch(()=>
{new XWiki.widgets.Notification("Error when trying to like the page.","error")})},h=function(){var b=a(".like-button").first();a.post(e,{xaction:"unlike",form_token:c.form_token,document:XWiki.Model.serialize(c.documentReference)}).then(d=>{b.removeClass("btn-default");b.addClass("btn-primary");b.find(".like-number").text(d.counter);a("#is-liked").val("false");new XWiki.widgets.Notification("The page has been unliked.","done")}).catch(()=>{new XWiki.widgets.Notification("Error when trying to unlike the page.",
"error")})};a(".like-button:not(.disabled)").on("click",function(){"true"!=a("#is-liked").val()?g():h()})});